import{c as V,h as z,b as R}from"./vm.e1a0da41.js";import{g as q,F as E,h as c,W as j,z as O,q as D,_ as W,f as J,A as M,o as C,a as B,d as I,e as u,w as g,j as P,U as L,a0 as G,a1 as H,i as N,t as S,r as X,k as Y,a2 as A}from"./index.42e2b6da.js";import{u as Z,a as $,Q as T}from"./QBtn.e503eecb.js";import{u as F,b as K,Q as ee,a as U}from"./QForm.bac847a1.js";import{P as te}from"./PrimaryButton.676e9e17.js";var ae=V({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:n}){const r=q(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>E("div",{class:r.value},z(n.default))}}),w=V({name:"QItem",props:{...F,...Z,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:n,emit:r}){const{proxy:{$q:t}}=D(),y=K(e,t),{hasLink:o,linkAttrs:m,linkClass:a,linkTag:d,navigateOnClick:v}=$(),k=c(null),_=c(null),h=q(()=>e.clickable===!0||o.value===!0||e.tag==="label"),b=q(()=>e.disable!==!0&&h.value===!0),Q=q(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(y.value===!0?" q-item--dark":"")+(o.value===!0&&e.active===null?a.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(b.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),s=q(()=>{if(e.insetLevel===void 0)return null;const i=t.lang.rtl===!0?"Right":"Left";return{["padding"+i]:16+e.insetLevel*56+"px"}});function l(i){b.value===!0&&(_.value!==null&&(i.qKeyEvent!==!0&&document.activeElement===k.value?_.value.focus():document.activeElement===_.value&&k.value.focus()),v(i))}function f(i){if(b.value===!0&&j(i,13)===!0){O(i),i.qKeyEvent=!0;const p=new MouseEvent("click",i);p.qKeyEvent=!0,k.value.dispatchEvent(p)}r("keyup",i)}function x(){const i=R(n.default,[]);return b.value===!0&&i.unshift(E("div",{class:"q-focus-helper",tabindex:-1,ref:_})),i}return()=>{const i={ref:k,class:Q.value,style:s.value,role:"listitem",onClick:l,onKeyup:f};return b.value===!0?(i.tabindex=e.tabindex||"0",Object.assign(i,m.value)):h.value===!0&&(i["aria-disabled"]="true"),E(d.value,i,x())}}}),ne=V({name:"QList",props:{...F,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:n}){const r=D(),t=K(e,r.proxy.$q),y=q(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(t.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>E(e.tag,{class:y.value,role:"list"},z(n.default))}});const ie={setup(){const e=J(),n=c(!1),r=c(!1),t=c(!1),y=c(!0),o=c([]),m=c(""),a=c(""),d=c(""),v=async()=>{if(n.value)if(o.value.find(l=>l.item.key.toLowerCase()===m.value.toLowerCase()))r.value=!0;else{const l={key:m.value,value:a.value};console.log(l);const f=await L.addProfileItem(l);o.value=[...o.value,{item:l,isEditing:!1}],console.log("response",f),r.value=!1,n.value=!1}else n.value=!0},k=s=>{console.log(s.target.innerText),d.value=s.target.innerText},_=s=>{console.log(s),t.value=!0,o.value=o.value.map(l=>l.item.key===s?{item:{key:l.item.key,value:l.item.value},isEditing:!0}:l)},h=async(s,l,f)=>{o.value=o.value.map(i=>i.item.key===s?{item:{key:s,value:l},isEditing:f}:i);const x=await L.editProfileItem({key:s,value:l});console.log(x.data)};return{profileItems:o,store:e,newItemKey:m,newItemValue:a,isCreating:n,isEditing:t,isCreationError:r,isLoading:y,addItem:v,inputChange:k,saveItem:async(s,l)=>{d.value!==""?(h(s,d.value,!1),d.value=""):h(s,l,!1),t.value=!1},editItem:_,deleteProfileItem:async s=>{o.value=o.value.filter(f=>f.item.key!==s.key);const l=await L.deleteProfileItem(s);console.log(l.data)}}},async mounted(){await M.initUser();const e=this.store.user.profileInfo.map(n=>JSON.parse(n));this.profileItems=e.map(n=>({item:n,isEditing:!1})),this.isLoading=!1},components:{PrimaryButton:te}},le={key:0},se={class:"q-pa-md list-container"},oe=I("h1",{class:"profile-title"},"Profile",-1),re=["contenteditable"],ue={class:"create-item-form"},ce={class:"text-negative error-msg"};function de(e,n,r,t,y,o){const m=X("PrimaryButton");return t.isLoading?P("",!0):(C(),B("div",le,[I("div",se,[oe,u(ne,{bordered:""},{default:g(()=>[(C(!0),B(G,null,H(t.profileItems,(a,d)=>(C(),B("div",{key:d,class:"item"},[u(w,{class:"row items-center"},{default:g(()=>[u(ae,{class:"item__name text-grey text-capitalize"},{default:g(()=>[Y(S(a.item.key),1)]),_:2},1024),u(T,{onClick:v=>t.deleteProfileItem(a.item),class:"option-icon",color:"grey",flat:"",round:"",dense:"",icon:"clear"},null,8,["onClick"])]),_:2},1024),u(w,{class:"row items-center"},{default:g(()=>[I("div",{onInput:n[0]||(n[0]=(...v)=>t.inputChange&&t.inputChange(...v)),class:A(["info-input",a.isEditing?"info-input_active":""]),contenteditable:a.isEditing?"true":"false"},S(a.item.value),43,re),u(T,{onClick:v=>t.isEditing?t.saveItem(a.item.key,a.item.value):t.editItem(a.item.key),class:A([t.isEditing&&!a.isEditing?"hidden":"","option-icon"]),color:"grey",flat:"",round:"",dense:"",icon:a.isEditing?"check":"edit"},null,8,["onClick","class","icon"])]),_:2},1024)]))),128))]),_:1})]),u(ee,{onSubmit:t.addItem},{default:g(()=>[I("div",ue,[t.isCreating?(C(),N(w,{key:0},{default:g(()=>[u(U,{filled:"",modelValue:t.newItemKey,"onUpdate:modelValue":n[1]||(n[1]=a=>t.newItemKey=a),label:"key","label-color":"grey",color:"white","lazy-rules":"",rules:[a=>!!a||"Key is required"]},null,8,["modelValue","rules"])]),_:1})):P("",!0),t.isCreating?(C(),N(w,{key:1},{default:g(()=>[u(U,{mask:"",filled:"",modelValue:t.newItemValue,"onUpdate:modelValue":n[2]||(n[2]=a=>t.newItemValue=a),label:"value","label-color":"grey",color:"white","lazy-rules":"",rules:[a=>!!a||"Value is required"]},null,8,["modelValue","rules"])]),_:1})):P("",!0)]),I("p",ce,S(t.isCreationError?"Item with this key already exists":""),1),u(m,{text:"Add item"})]),_:1},8,["onSubmit"])]))}var ke=W(ie,[["render",de]]);export{ke as default};
